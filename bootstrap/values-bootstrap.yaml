# override the `blah` or `` or `` to configure your
# desired namespace. eg `my-dev` etc
# removing the anchor tag will also break things üèåÔ∏è‚Äç‚ôÇÔ∏è
# overriding `ci_cd_namespace` directly using helm will not work ü§•

bootstrap-project:
  enabled: true
  ci_cd_namespace: &ci_cd "labs-ci-cd"
  pm_namespace: &pm "labs-pm"
  ops_namespace: &ops "labs-cluster-ops"
  dev_namespace: &dev "labs-dev"
  test_namespace: &test "labs-test"
  staging_namespace: &stage "labs-staging"
  bindings: &binds # this labs-devs is the GROUP NAME in IDM
    - name: labs-devs
      kind: Group
      role: edit
    # this labs-admins is the GROUP NAME in IDM
    - name: labs-admins
      kind: Group
      role: admin
    - name: jenkins
      kind: ServiceAccount
      role: admin
      namespace: *ci_cd

  namespaces:
    - name: *ci_cd
      bindings: *binds
    - name: *pm
      bindings: *binds
    - name: *ops
      bindings: *binds
    - name: *dev
      bindings: *binds
    - name: *test
      bindings: *binds
    - name: *stage
      bindings: *binds

argocd-operator:
  enabled: true
  name: argocd
  namespace: *ci_cd

  # operator manages upgrades etc
  operator:
    version: argocd-operator.v0.0.15
    channel: alpha
    name: argocd-operator

  metrics:
    enabled: true
    prometheus:
      version: prometheusoperator.0.37.0

  # argocd rbac only in listed namespaces
  namespaceRoleBinding:
    enabled: false
    namespaces:
      - name: *ci_cd
      - name: *pm
      - name: *ops
      - name: *dev
      - name: *test
      - name: *stage

  # https://argocd-operator.readthedocs.io/en/latest/reference/argocd/
  argocd_cr:
    version: v2.0.2
    accounts:
      accounts.admin: login, apiKey
    applicationInstanceLabelKey: petbattle.app/uj
    grafana:
      enabled: true
      route:
        enabled: true
      size: 1
    prometheus:
      enabled: true
      route:
        enabled: true
      size: 1
    ha:
      enabled: false
    rbac:
      defaultPolicy: role:admin
    secrets: []
    server:
      route:
        enabled: true
      autoscale:
        enabled: false
      service:
        type: ClusterIP
    initialRepositories: |
      - name: redhat-cop
        type: helm
        url: https://redhat-cop.github.io/helm-charts

sealed-secrets:
  # Disabled by default
  enabled: true
  nameOverride: sealed-secrets
  fullnameOverride: sealed-secrets
  # namespace must exist, so we use labs-ci-cd by default.
  namespace: *ci_cd
  # Dont touch the security context values, deployment will fail in OpenShift otherwise.
  securityContext:
    runAsUser: ""
    fsGroup: ""
